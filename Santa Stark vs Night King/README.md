# The Great War Between Santa Stark vs Night King
*Sansa Stark*, *Lady of Winterfell*, is preparing the defence of the North, and has made plans to defend against the *Night King of the White Walkers*, who has invaded the lands of the living with an army of wights, beginning the Great War.

The battle commanders have analyzed a number of scenarios, and plans are being made. Key locations in the north are being defended. Scouting reports and ravens (of two- and three-eyed varieties) have provided accurate reports for the size of the Night King’s forces. One uncertainty remains, namely the quality of archers needed to defend the strongholds. The archers can still be trained, and there may be time to raise their skill level to the minimum level needed to guarantee victory.

*Lady Sansa* needs to know the minimum skill for the archers in order to guarantee that the defence of the Northern strongholds. The skill of the human archers is represented by a floating point value *p* between 0 and 100, representing the percentage of wights destroyed by flaming arrows. If *p* = 0, then the archers have no skill, and none of the wights are destroyed by flaming arrows, and if *p* = 100, every targeted wight is destroyed. Due to uncertainties in battle, *p* is very likely to be well below 100, and due to natural random effects (like wind, or the night, full of terrors), the actual fraction of wights killed per volley will be random, in the range 0 through *p*.

*Lady Sansa* requires an estimate of the value *p* that will guarantee victory. Since we don’t have a simple formula, we’ll have to simulate an attack repeatedly, using different values for *p*. We are seeking the smallest value for *p* that results in victory with a probability of 95%.
***
**Initial conditions**. Suppose the area near the fortress is divided into a *N* by *N* square grid. The value of *N* depends on the scenario. The wights start out occupying the top row of the grid squares. Specifically, each grid square in the top row of the grid starts with an equal number of wights. As GoT fans know, even wights that are gruesomely damaged are still a threat, and therefore a fractional number of wights in a grid square makes sense. The starting number of wights depends on the scenario.
***
**Movement of wights.** During an attack, the wights travel directly southward (towards the bottom of the grid), one grid square at a time, towards a fortress defended by humans. For the purposes of the simulation, you can imagine that the fortress is “below” the bottom row of grid squares.
***
**Static Defences.** Each grid square contains some fortifications (barriers, traps, etc.) that defeat attacking wights. The strength of the fortifications in a grid square is represented by a non-negative integer called ￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼a fortification value. If the fortification value in a grid square is equal to *d*, then exactly *d* of the wights that enter that grid square do not make it to the grid square directly to the south in the next row. If *d* is larger than the number of wights entering the square, exactly zero of these are able to move south to the next square.
***
**Active Defences.** Human archers have a limited range of 30 grid squares (no matter how big the battlefield is). If the wights are not within range, the archers do not fire. But if the wights are in range, the defending humans fire a volley of flaming arrows. The skill of the human archers is represented by an integer *p* be- tween 0 and 100. The archers are not completely consistent, so each volley of arrows destroys a random percentage between 0 and *p* percent of the wights that are not defeated by the fortifications in each square of the current grid row. The random percentage of wights destroyed is determined separately for each grid square. Wights in a grid square that are not defeated by the fortifications or destroyed by fire arrows make it to the next row.
***
**Luck.** The fact that the archers are not consistent means that the outcome of an attack is based in part on luck. It is bad planning to count on luck being in your favour! The way to mitigate uncertainty like this is to repeat the scenario many times. Each simulated scenario might be more or less lucky, but if you repeat the simulation a large number of times, you can get a good idea of what should happen. For example, if you repeat the same scenario 1000 times (with the same initial conditions and archer skill), the proportion of successful defenses should tell you how confident you are that the humans will defend successfully. If the scenario results in 950 successes out of 1000 trials, you can say that the model predicts a 95% chance of a success.
***
**Success** From the point of view of the defenders, success is determined by the number of wights that survive the attack, and reach the fortress. If the total number of wights that survive all the defences is less than some number *k*, then the defence was successful. The number *k* depends on the scenario. *Note*: Success is not determined by the number of wights that arrive in the bottom row, but the number who survive the bottom row; there are fortifications in the bottom row, and the archers will make one last desperate volley!
***
**Scenario files.** The program inputs are to be read from a file. The first line of the file contains three numbers separated by commas: *N* (the size of the grid), *W* (the total number of wights in the attack), and *k*, the number of wights that must reach the fortress in order to capture it. After the first line, there are *N* more lines each containing *N* integers separated by commas which are the fortification strengths for each grid square in each row of the grid.
***
**General problem statement.** Write a program which, given the grid size *N* , the total number of wights *W* (to be divided evenly across the top row of the grid), the strength of the fortifications in grid square, and the number of wights *k* that must reach the fortress in order to capture it, determine the minimum archer skill value *p* that gives the human forces at least a 95% chance of success.

